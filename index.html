<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapping US Generational Composition</title>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.css" rel="stylesheet">
    <script defer src="map.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <style>
        body { margin: 20px; font-family: Arial, sans-serif; text-align: center; }
        .map-container { display: flex; flex-direction: column; align-items: center; }
        #map { width: 80vw; height: 80vh; margin: 20px auto; align-items: center; }
        .legend { 
            background: white; 
            padding: 10px; 
            border-radius: 5px; 
            position: absolute; 
            bottom: 10px; 
            left: 10px; 
            text-align: left; 
        }
        .description { max-width: 80vw; margin: 20px auto; text-align: left; font-size: 16px; line-height: 1.5; }
        h1 { margin-top: 80px; margin-bottom: 80px; }
        p { margin-left: 180px; margin-right: 180px; text-align: left; }
        .options {
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 15px;
            background: #fff;
            color: #000;
            text-align: center;
        }

        .options a {
            display: inline-block;
            padding: 10px 20px;
            background: #000;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            font-size: 1rem;
            transition: 0.3s;
        }

        .options a:hover {
            background: #444;
        }
    </style>
</head>
<body>
    <h1>Mapping US Generational Composition Across States and Counties</h1> 

<p>
    This interactive map visualizes the distribution of different generations across the United States.  
    It combines <strong>polygon-level dominant generation</strong> with <strong>point-based sampling of population density</strong> to reveal both macro-level and micro-level demographic patterns.
</p>

<p>
    The polygon colors represent the <strong>dominant generation</strong> within each state or county — the age cohort that has the largest population share within that area.  
    The generations included in this map are:
    <strong>Silent</strong> (70+), <strong>Boomer</strong> (55–69), <strong>Gen X</strong> (40–54), 
    <strong>Millennial</strong> (25–39), <strong>Gen Z</strong> (10–24), and <strong>Gen Alpha</strong> (0–14).
</p>

<p>
    To complement the polygon overview, the map also displays <strong>sampled point clouds</strong> representing population density within each generation.  
    These points are randomly placed within the geographic boundaries of each state or county, proportional to the actual population size of each generation. 
    This technique provides a fine-grained visual sense of population concentration and spatial distribution.
</p>

<p>
    <strong>Methodology:</strong><br>
    This map is constructed from <strong>ACS 2023, Table B01001</strong>, which provides single-year age counts for both males and females.  
    Each generation is computed by aggregating the ACS age-by-sex categories into broader generational cohorts.  
    For each polygon (state or county), the dominant generation (<code>dom_gen</code>) is identified by comparing the summed population of each cohort.
</p>

<p>
    <strong>Why Generational Mapping Matters:</strong><br>
    Mapping generational composition highlights demographic patterns that shape education, housing, labor, migration, and political dynamics.  
    For example, counties dominated by <strong>Gen Alpha</strong> may reflect younger families and higher birth rates, while regions dominated by <strong>Boomers</strong> or <strong>Silent</strong> generations may indicate aging populations with different social and infrastructural needs.
</p>

<div id="map"></div>

<p>
    <strong>Interactive Features:</strong>
    <ul>
        <p><strong>Zooming:</strong> Zooming in switches the map from state-level polygons to more detailed county-level polygons, allowing exploration at multiple scales.</p>
        
        <p><strong>Polygon Highlighting:</strong> Hovering over a state or county outlines its border for clarity.</p>

        <p><strong>Click for Details:</strong> Clicking a polygon opens a tooltip displaying the population of each generation within that region, along with the dominant generation.</p>

        <p><strong>Points as Population Indicators:</strong> Colored point clouds represent sampled individuals from each generation, providing a textured view of relative population density.  
        (Points are <strong>non-interactive</strong>; only polygons respond to clicks.)</p>
    </ul>
</p>
 
    
</body>
</html>